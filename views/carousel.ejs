<%- include("./includes/head.ejs"); %>
  
  <style>
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }
    
    body {
      background: black;
      color: white;
    }
    
    section {
      height: 100%;
    }
    
    /* Add this CSS for proper spacing and responsive behavior */
    .navbar {
        padding: 0.5rem 1rem;
        border-bottom: 1px solid grey;
    }

    .navbar-brand {
        margin-right: 2rem;
    }

    .navbar-nav .nav-item {
        margin: 0 0.5rem;
    }
    
    #offcanvasNavbar {
      display: none;
    }

    /* Optional: Add hover effects */
    .nav-link:hover {
        opacity: 0.8;
        transition: opacity 0.3s ease;
    }
    
    .navbar .navbar-nav .nav-item .nav-link i,
    .navbar .navbar-nav .nav-item .nav-link span {
        color: #f9046b;
    }

    .navbar .navbar-nav .nav-item .nav-link span {
        font-weight: 600;
    }
    
    /* Base styles for nav items */
    .navbar .navbar-nav .nav-item .nav-link {
        transition: all 0.3s ease;
    }

    .navbar .navbar-nav .nav-item .nav-link i,
    .navbar .navbar-nav .nav-item .nav-link span {
        transition: color 0.3s ease;
    }

    /* Hover styles */
    .navbar .navbar-nav .nav-item:hover {
        transform: scale(1.02);
        transition: transform 0.2s ease-in-out;
    }

    .navbar .navbar-nav .nav-item:hover .nav-link i,
    .navbar .navbar-nav .nav-item:hover .nav-link span {
        color: white !important;
    }

    /* Optional: Add active state styles */
    .navbar .navbar-nav .nav-item .nav-link.active i,
    .navbar .navbar-nav .nav-item .nav-link.active span {
        color: white !important;
    }
    
    .cont1 {
      position: relative;
      overflow: hidden;
    }
    
    .div11 {
      position: relative;
      overflow: hidden;
      margin-top: 23px;
    }

    .div11::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50px; /* Adjust height as needed */
      background: linear-gradient(to top, rgba(0,0,0,1), transparent);
      z-index: 1;
      pointer-events: none;
    }

    .div11 .skeleton1 {
      background: linear-gradient(90deg, 
          #2a2a2a 25%, 
          #3a3a3a 50%, 
          #2a2a2a 75%
      );
      height: 450px;
      width: 100%;
      border-radius: 4px;
      animation: shimmer 1.5s infinite;
    }

    .div11 img {
      display: none;
      width: 100%;
      height: 450px;
      object-fit: fill;
      z-index: -1;
    }
    
    .scroll-container {
      width: 100%;
      display: flex;
      overflow-x: auto;
      gap: 20px;
      white-space: nowrap;
      scroll-behavior: smooth; /* Optional: smooth scrolling */
    }
    
    .image-wrapper1 {
      padding: 0;
      flex: 0 0 20rem; /* Flex-grow, flex-shrink, and flex-basis */
      max-width: 20rem; /* Ensure cards do not exceed this width */
      display: flex; /* Use flexbox for layout inside wrapper */
      justify-content: center; /* Center card horizontally */
    }
    
    .image-wrapper1 .skeleton2 {
/*       background: linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%); */
      background: linear-gradient(90deg, 
        #2a2a2a 25%, 
        #3a3a3a 50%, 
        #2a2a2a 75%
      );
      height: 200px; /* Set the height to 300px */
      width: 20rem; /* Adjust the width as needed */
      border-radius: 4px;
      animation: shimmer 1.5s infinite;  /* Uncomment if using shimmer animation */
    }

    .image-wrapper1 img {
      display: none;
      width: 100%;
      height: 200px;
      object-fit: fill;
      border-radius: 8px;
    }
    
    @keyframes shimmer {
      0% {
        background-position: -200px 0; /* Start position of the shimmer */
      }
      100% {
        background-position: 200px 0; /* End position of the shimmer */
      }
    }
    
    .scroll-container::-webkit-scrollbar {
      display: none;
    }
    
    .g_footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .footer_a {
      text-decoration: none;
      color: grey;
      font-size: 16px;
      text-transform: uppercase;
      font-weight: bold;
      transition: color 0.3s, transform 0.3s; /* Smooth transitions */
    }

    .footer_a:hover {
      color: black !important; /* Hover color */
      transform: translateY(-5px); /* Small hover animation */
    }
    
    /* Ensure proper mobile behavior */
    @media (max-width: 800px) {
      .first_cont {
        margin-bottom: 80px;
      }
      
      .navbar-collapse {
        display: none;
      }

      #offcanvasNavbar {
        display: block;
      }
    }
    
    @media (max-width: 600px) {
      .first_cont {
        margin-bottom: 200px;
      }
      
      .div11 {
        margin-top: 23px;
      }
      
/*       .div11.has-background {
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
      } */
      
      .div11 .skeleton1 {
/*         background: linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%); */
        background: linear-gradient(90deg, 
          #2a2a2a 25%, 
          #3a3a3a 50%, 
          #2a2a2a 75%
        );
        height: 300px; /* Set the height to 300px */
        width: 100%; /* Adjust the width as needed */
        border-radius: 4px;
        animation: shimmer 1.5s infinite;  /* Uncomment if using shimmer animation */
      }

      .div11 img {
        display: none;
        width: 100%;
        height: 300px;
        object-fit: fill;
      }
      
      @keyframes shimmer {
        0% {
          background-position: -200px 0; /* Start position of the shimmer */
        }
        100% {
          background-position: 200px 0; /* End position of the shimmer */
        }
      }
      
      .scroll-container {
        padding: 0;
      }
      
      .image-wrapper1 {
        padding: 0;
        flex: 0 0 15rem; /* Flex-grow, flex-shrink, and flex-basis */
        max-width: 15rem; /* Ensure cards do not exceed this width */
        display: flex; /* Use flexbox for layout inside wrapper */
        justify-content: center; /* Center card horizontally */
      }
      
      .g_footer {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
      }
      
      .g_footer div {
        margin-bottom: 10px;
        margin-right: 30px;
      }
      
      .footer_a {
        font-size: 14px;
      }
    }
  </style>
  
  <header>
		<%- include("./includes/header2.ejs"); %>
	</header>
    
  <section>
    <div class="container-fluid pt-4 pb-3 mt-3">
      <div class="row justify-content-center">
        <div class="col-12 col-md-12"></div>

        <div class="col-12 col-md-12 border-0 p-0">
          <% if (data && data.length >= 1) { %>
            <div id="carouselExample">
              <% data.forEach(i => { %>
                <div class="cont1">
                    <div class="div11">
                      <div class="skeleton1"></div>
                      <img src="" data-src="<%= i.videoImage %>" class="w-100" alt="<%= i.title %>">
                    </div>
                </div>
                <div class="scroll-container mt-5 ps-2 pe-1">
                  <% i.episodes.forEach(j => { %>
                      <div class="image-wrapper1 mb-2">
                        <a href="/play/<%= j.video %>" style="text-decoration: none;">
                          <div class="skeleton2"></div>
                          <img src="" data-src="<%= j.image %>" class="card-img-top" alt="<%= j.title %>">
                        </a>
                      </div>
                  <% }) %>
                </div>
              <% }) %>
            </div>
          </div>
          <% } else { %>
            <h2>
              No data found...
            </h2>
          <% } %>

        <div class="col-12 col-md-12"></div>
      </div>
    </div>
 </section>
    
  <section>
    <div class="container" style="height: 100px;"></div>
  </section>
    
  <footer>
	</footer>
            
  <script>
    globalThis.document.addEventListener('DOMContentLoaded', () => {
      const baseImgUrl = "https://glowbal.co.uk/api/uploads/";
      
//       async function loadThumbnail(element) {
//         const imageSrc = element.dataset.src;

//         try {
//           // Simulate loading the image (replace with actual image loading if needed)
//           await new Promise(resolve => setTimeout(resolve, 500)); // Simulate 0.5 second loading time

//           // Apply background and remove skeleton
//           element.classList.add('has-background');
//           element.style.backgroundImage = `url('${baseImgUrl}${imageSrc}')`;
//           const skeleton = element.querySelector('.skeleton1');
//           if (skeleton) {
//               skeleton.remove();
//           }

//         } catch (error) {
//           console.error("Error loading image:", error);
//           // Handle error (e.g., display a fallback image)
//         }
//       }

//       // Find all elements with the div11 class
//       const thumbnailDivs = document.querySelectorAll('.div11');

//       thumbnailDivs.forEach(div => {
//         loadThumbnail(div);
//       });



      const images2 = document.querySelectorAll('.div11 img:not(.funme)');
      
      // console.log(images2);

      images2.forEach(img => {
        img.onload = () => {
          img.previousElementSibling.style.display = 'none'; // Hide skeleton
          img.style.display = 'block'; // Show image
        };

        img.onerror = () => {
          // Hide the image
          img.style.display = 'none';
                  
          // Show the skeleton loader
          const skeleton = img.previousElementSibling;
          if (skeleton) {
            skeleton.style.display = 'block';
          }
        };

        const imgElement = img.getAttribute('data-src');
        // console.log(imgElement); 
                
        // console.log(!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop'));

        if (!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop')) {
          img.setAttribute('src', baseImgUrl + imgElement);
        }

        else {
          img.setAttribute('src', imgElement); // Set src to trigger loading
        }
      });
      
      const images3 = document.querySelectorAll('.image-wrapper1 img:not(.funme)');
      
      // console.log(images2);

      images3.forEach(img => {
        img.onload = () => {
          img.previousElementSibling.style.display = 'none'; // Hide skeleton
          img.style.display = 'block'; // Show image
        };

        img.onerror = () => {
          // Hide the image
          img.style.display = 'none';
                  
          // Show the skeleton loader
          const skeleton = img.previousElementSibling;
          if (skeleton) {
            skeleton.style.display = 'block';
          }
        };

        const imgElement = img.getAttribute('data-src');
        // console.log(imgElement); 
                
        // console.log(!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop'));

        if (!imgElement.includes('www.w3schools') && !imgElement.includes('static.worldstarhiphop')) {
          img.setAttribute('src', baseImgUrl + imgElement);
        }

        else {
          img.setAttribute('src', imgElement); // Set src to trigger loading
        }
      });
    })
  </script>

<%- include("./includes/end.ejs"); %>